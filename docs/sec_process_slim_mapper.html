
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Process SLIM Mapper &#8212; Tribology  documentation</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Roller Bearings" href="sec_roller_bearings.html" />
    <link rel="prev" title="Functions for Data Import" href="sec_data_import.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sec_roller_bearings.html" title="Roller Bearings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sec_data_import.html" title="Functions for Data Import"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Tribology  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sec_general_tribology.html">General Tribology</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec_contact_mechanics.html">Contact Mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec_ehd_lubrication.html">EHD Lubrication</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec_lubricants.html">Lubricants and Lubrication</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec_data_import.html">Functions for Data Import</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Process SLIM Mapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec_roller_bearings.html">Roller Bearings</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec_constants.html">Constants for Tribology</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec_p3can.html">P3CAN</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>Process SLIM Mapper</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="process-slim-mapper">
<h1>Process SLIM Mapper<a class="headerlink" href="#process-slim-mapper" title="Permalink to this headline">¶</a></h1>
<p>All of the below functions can be found in the <code class="code docutils literal notranslate"><span class="pre">process_slim_mapper</span></code>
module of the package.</p>
<span class="target" id="module-process_slim_mapper"></span><p>The below functions can be used to post-process SLIM (spacer layer imaging method)
mapper bitmap files created by MTM or EHD test rigs by PCS Instruments.</p>
<dl class="function">
<dt id="process_slim_mapper.load_npz">
<code class="descname">load_npz</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/process_slim_mapper.html#load_npz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#process_slim_mapper.load_npz" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an npz database file into a mutable dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file</strong> (<em>str</em>) – Path to npz database file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>dat_cop</strong> – Loaded data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="process_slim_mapper.slim2thick">
<code class="descname">slim2thick</code><span class="sig-paren">(</span><em>file</em>, <em>rgb_map</em>, <em>rads=None</em>, <em>skip=1</em>, <em>crop=0.0</em>, <em>aperture=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/process_slim_mapper.html#slim2thick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#process_slim_mapper.slim2thick" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract film thickness data from a PCS Instruments SLIM image file in BMP
format. To obtain the thickness data, the color information of the BMP is
converted to thickness information according to the rgb color map (Spacer
Calibration file) provided by the instrument.</p>
<p>The center point of the relevant (circular) contact area between the ball
and the glass window is automatically detected. The radius of the contact
area is automatically detected if <cite>rads</cite> is not provided. Thickness
information outside of the detected area is discarded. The <cite>crop</cite> and
<cite>aperture</cite> parameters can be used to further constrain the area of interest.</p>
<p>The <cite>skip</cite> parameter determines the number of data points that is evaluated.
For example, for <cite>skip = 1</cite>, every pixel within the area of interest is
evaluated; for <cite>skip = 10</cite> every 10th pixel is evaluated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><p class="first"><strong>file</strong> (<em>str</em>) – Path to a PCS bitmap 3D SLIM mapper output file</p>
</li>
<li><p class="first"><strong>rgb_map</strong> (<em>str</em>) – Path to a PCS Spacer Calibration file in npz format. The original
instrument output file needs to be imported into npz database format
using the <cite>import_del</cite> function of the <cite>data_import</cite> module first.</p>
</li>
<li><p class="first"><strong>rads</strong> (<em>int, float, list, ndarray, optional</em>) – The contact radius (in pixels) of the circular contact area between
ball and glass window. If several radii are provided, the mean value
will be used.</p>
</li>
<li><p class="first"><strong>skip</strong> (<em>positive int, optional</em>) – The number of pixels to skip (in both x and y direction). Higher skip
numbers will lead to faster processing; lower skip numbers to higher
accuracies.</p>
</li>
<li><p class="first"><strong>crop</strong> (<em>float, optional</em>) – Determines by how much the radius of the contact area is cropped
during the data processing step. Value needs to be in the range [0, 1].
A crop value of 0.5 will reduce the radius by 50 %.</p>
</li>
<li><p class="first"><strong>aperture</strong> (<em>dict, optional</em>) – A dictionary defining a rectangular area relative to the crop radius.
Data points outside the rectangular area are not evaluated. The borders
of the rectangle are defined relative to the crop radius. Values in the
range [0, 1] may be defined for the following keys:</p>
<ul class="simple">
<li>top</li>
<li>right</li>
<li>bottom</li>
<li>left</li>
</ul>
<p>If the aperture value is 0, the borders of the rectangle
intersect with the crop radius on all four sides (i.e., the aperture
has no effect). The following will reduce the crop radius on the top and
bottom by 30 %:</p>
<p>aperture = {‘top’: 0.3, ‘bottom’: 0.3}</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>thick</strong> (<em>ndarray</em>) – Film thickness in nanometer for each evaluated pixel.</li>
<li><strong>rgb</strong> (<em>ndarray</em>) – Best matching RGB tuple for each evaluated pixel obtained by comparison
of bitmap image and SLIM Spacer Calibration file.</li>
<li><strong>rads</strong> (<em>ndarray</em>) – The automatically detected radii of the contact between ball and window.
If <cite>rads</cite> is provided as an argument, <cite>rads</cite> is simply returned.</li>
<li><strong>x_vals</strong> (<em>tuple</em>) – Minimum and maximum evaluated pixel coordinate (in x-direction)</li>
<li><strong>y_vals</strong> (<em>tuple</em>) – Minimum and maximum evaluated pixel coordinate (in y-direction)</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="process_slim_mapper.slim2thick_batch">
<code class="descname">slim2thick_batch</code><span class="sig-paren">(</span><em>bitmaps</em>, <em>zero_bmp</em>, <em>rgb_map</em>, <em>mtm_file</em>, <em>relative=False</em>, <em>pcs_vars=('time_accumulated_s'</em>, <em>)</em>, <em>plot=False</em>, <em>plt_dir=''</em>, <em>print_prog=True</em>, <em>skip=1</em>, <em>crop=0.0</em>, <em>aperture=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/process_slim_mapper.html#slim2thick_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#process_slim_mapper.slim2thick_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Batch process a number of PCS Spacer Layer image files that share the same
zero step, instrument output file and spacer layer calibration file.</p>
<p>This function is a wrapper function for <cite>slim_to_thick</cite>. See the docstring
for more information.</p>
<p>Returns a dictionary containing mean film thickness values and, depending
on user input, corresponding MTM variable values at the time of the film
thickness measurement step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>bitmaps</strong> (<em>tuple, list</em>) – Paths to spacer layer bitmap files as list/tuple of strings.</li>
<li><strong>zero_bmp</strong> (<em>str</em>) – Path to bitmap image that corresponds to initial zero step of
experiment.</li>
<li><strong>rgb_map</strong> (<em>str</em>) – Path to the shared spacer layer calibration file, imported into npz
database format using the <cite>import_del</cite> function of the <cite>import_data</cite>
module.</li>
<li><strong>mtm_file</strong> (<em>str</em>) – Path to the shared instrument output file, imported into npz database
format using the <cite>import_del</cite> function of the <cite>import_data</cite> module.</li>
<li><strong>relative</strong> (<em>bool, optional</em>) – If True, the mean film thickness value is calculated relative to the
mean film thickness of the zero step; if False, the absolute mean
film thickness is calculated.</li>
<li><strong>pcs_vars</strong> (<em>list, optional</em>) – A list of MTM variables. Variable names must match those used in npz
database created using the <cite>import_del</cite> function of the <cite>import_data</cite>
module. By default, values for variable <cite>time_accumulated_s</cite> are
included.</li>
<li><strong>plot</strong> (<em>bool, optional</em>) – If True, film thickness plots will be created for each image.</li>
<li><strong>plt_dir</strong> (<em>str, optional</em>) – Path to the output directroy in which to store plots.</li>
<li><strong>print_prog</strong> (<em>bool</em>) – If true, status updates are printed to the command line.</li>
<li><strong>skip</strong> (<em>positive int, optional</em>) – See function <cite>slim_to_thick</cite></li>
<li><strong>crop</strong> (<em>float, optional</em>) – See function <cite>slim_to_thick</cite></li>
<li><strong>aperture</strong> (<em>dict, optional</em>) – See function <cite>slim_to_thick</cite></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>outdict</strong> – The mean film thickness data for each bitmap file, along with extracted
data from instrument output files (depending on user inputs).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="sec_data_import.html" title="previous chapter (use the left arrow)">Functions for Data Import</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="sec_roller_bearings.html" title="next chapter (use the right arrow)">Roller Bearings</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="sec_roller_bearings.html" title="Roller Bearings"
             >next</a> |</li>
        <li class="right" >
          <a href="sec_data_import.html" title="Functions for Data Import"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Tribology  documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2017-2018, Moritz Ploss. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>